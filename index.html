<!doctype html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Market Analysis - EECS351 Project</title>

    <!-- Disable tap highlight on IE -->
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Web Application Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Web Starter Kit">
    <link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Web Starter Kit">
    <link rel="apple-touch-icon" href="images/touch/apple-touch-icon.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#2F3BA2">

    <!-- Color the status bar on mobile devices -->
    <meta name="theme-color" content="#2F3BA2">

    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="http://www.example.com/">
    -->

    <!-- Material Design icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">


    <!-- Material Design Lite page styles:
    You can choose other color schemes from the CDN, more info here http://www.getmdl.io/customize/index.html
    Format: material.color1-color2.min.css, some examples:
    material.red-teal.min.css
    material.blue-orange.min.css
    material.purple-indigo.min.css
    -->
    <link rel="stylesheet" href="styles/material.min.css">

    <!-- Your styles -->
    <link rel="stylesheet" href="styles/main.css">
  </head>
  <body class="mdl-demo mdl-color--grey-100 mdl-color-text--grey-700 mdl-base">
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <header class="mdl-layout__header mdl-layout__header--scroll mdl-color--primary">
        <div class="mdl-layout--large-screen-only mdl-layout__header-row">
        </div>
        <div class="mdl-layout--large-screen-only mdl-layout__header-row">
          <h3>Stock Market Analysis</h3>
        </div>
        <div class="mdl-layout--large-screen-only mdl-layout__header-row">
        </div>
        <div class="mdl-layout__tab-bar mdl-js-ripple-effect mdl-color--primary-dark">
          <a href="#overview" class="mdl-layout__tab is-active">Overview</a>
          <a href="#preprop" class="mdl-layout__tab">Pre-Processing</a>
          <a href="#forecast" class="mdl-layout__tab">Forecasting</a>
          <a href="#demo" class="mdl-layout__tab">Demo</a>
          <a href="#faq" class="mdl-layout__tab">FAQ</a>
        </div>
      </header>
      <main class="mdl-layout__content">
        <div class="mdl-layout__tab-panel is-active" id="overview">
          <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
            <div class="mdl-card mdl-cell mdl-cell--12-col">
              <div class="mdl-card__supporting-text">
                <h4>Objective</h4>
                The objective of this project was to create a program that would take in a stock symbol from a user and return a suggested method of trading based on the stockâ€™s history. For the purposes of this project, we designed our program to be able to handle user-specified resolutions of a day, week, or month over a specified range of dates.
              </div>
            </div>
          </section>
          <section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp">
            <div class="mdl-card mdl-cell mdl-cell--12-col">
              <div class="mdl-card__supporting-text mdl-grid mdl-grid--no-spacing">
                <h4 class="mdl-cell mdl-cell--12-col">Team Member</h4>
                <div class="mdl-list__item mdl-cell mdl-cell--6-col">
                    <span class="mdl-list__item-primary-content">
                      <i class="material-icons mdl-list__item-icon">person</i>
                      Aung, Thuta
                    </span>
                  </div>
                <div class="mdl-list__item mdl-cell mdl-cell--6-col">
                    <span class="mdl-list__item-primary-content">
                      <i class="material-icons mdl-list__item-icon">person</i>
                      Ingram, Max
                    </span>
                  </div>
                <div class="mdl-list__item mdl-cell mdl-cell--6-col">
                    <span class="mdl-list__item-primary-content">
                      <i class="material-icons mdl-list__item-icon">person</i>
                      Jiang, Haiyang
                    </span>
                  </div>
                <div class="mdl-list__item mdl-cell mdl-cell--6-col">
                    <span class="mdl-list__item-primary-content">
                      <i class="material-icons mdl-list__item-icon">person</i>
                      Wu, Haoxiang
                    </span>
                  </div>
              </div>
            </div>
          </section>
          <section style="display: none;" class="section--footer mdl-color--white mdl-grid">
            <div class="section__circle-container mdl-cell mdl-cell--2-col mdl-cell--1-col-phone">
              <div class="section__circle-container__circle mdl-color--accent section__circle--big"></div>
            </div>
            <div class="section__text mdl-cell mdl-cell--4-col-desktop mdl-cell--6-col-tablet mdl-cell--3-col-phone">
              <h5>Lorem ipsum dolor sit amet</h5>
              Qui sint ut et qui nisi cupidatat. Reprehenderit nostrud proident officia exercitation anim et pariatur ex.
            </div>
            <div class="section__circle-container mdl-cell mdl-cell--2-col mdl-cell--1-col-phone">
              <div class="section__circle-container__circle mdl-color--accent section__circle--big"></div>
            </div>
            <div class="section__text mdl-cell mdl-cell--4-col-desktop mdl-cell--6-col-tablet mdl-cell--3-col-phone">
              <h5>Lorem ipsum dolor sit amet</h5>
              Qui sint ut et qui nisi cupidatat. Reprehenderit nostrud proident officia exercitation anim et pariatur ex.
            </div>
          </section>
        </div>
        <div class="mdl-layout__tab-panel" id="preprop">
          <section class="section--center mdl-grid mdl-grid--no-spacing">
            <div class="mdl-cell mdl-cell--12-col">
              <h4>Pre-Processing</h4>
              The individual stock data was fetched from online open API, where we are able to get price of up to the past 20 years given the stock symbol. To analyze the long term trend from the highly fluctuating raw stock price, we started by applying several DSP preprocessing techniques to filter out noise.
              <ul class="toc">
                <h4>Contents</h4>
                <a href="#psma">Simple Moving Average Filter (SMA)</a>
                <a href="#pewma">Exponentially Weighted Moving Average Filter (EWMA)</a>
                <a href="#pkalman">Kalman Filter</a>
              </ul>

              <h5 id="psma">Simple Moving Average Filter (SMA)</h5>
              The simple moving average filter is one the most commonly used FIR filters to reduce the noises and get the long term trend from the signal. The simple moving average is the unweighted mean of the data over a specific period, which can be calculated from equation \eqref{eq:sma}.
              \begin{align}
              y[n]=\dfrac{1}{N}\sum_{k=1}^N x[n-N+k]
              \label{eq:sma}.
              \end{align}
              Ideally, if the raw data contains zero centered periodic fluctuations, a simple moving average filter is able to completely eliminate the noises. Another property of the SMA filter is that SMA always lags behind the actual data since it takes the previous \(n\) data in the calculation.
              <h5 id="pewma">Exponentially Weighted Moving Average Filter (EWMA)</h5>
              An exponentially weighter moving average filter is the IIR moving average filter, where the weight factor decreases exponentially. It can be calculated using the recursive relation from equation \eqref{ewma}.
              \begin{align}
              y[n]=\alpha x[n] + (1 - \alpha) y[n-1]\label{ewma},
              \end{align}
              The response is smoother as the factor \(\alpha\) decreases. Typically the EWMA filter has less lag and are therefore more sensitive to the changes in the raw data than the SMA, but depending on the shape of the raw data, it is possible for one to not necessarily be better than the other.

              <h5 id="pkalman">Kalman Filter</h5>
              The Kalman filter, also known as a linear quadratic estimation (LQE), is a two-stage filter which estimates the state of a dynamic system based on a series of measurements containing unknown noises and inaccuracies. It recursively makes predictions based on the previous state and then corrects the predictions based on the new measurement. It is based on the discrete linear dynamic system which could be written as
              \begin{align}
              X(t+1)&=\Phi X(t)+\Gamma w(t)\label{ssm1}\\
              y(t)&=H X(t)+v(t)\label{ssm2}
              \end{align}
              The recursive relation on predictions and corrections are shown in equations \eqref{kalman1} - \eqref{kalman2}
              \begin{align}
              \text{Prediction:}~~~~~ & \hat{\mathbf{x}}_{k| k-1} = \mathbf{F}_k\hat{\mathbf{x}}_{k-1| k-1} + \mathbf{B}_k \mathbf{u}_k \label{kalman1}\\
              &\mathbf{P}_{k| k-1} =  \mathbf{F}_k \mathbf{P}_{k-1| k-1} \mathbf{F}_k^\mathbf{T} + \mathbf{Q}_k\\
              \text{Correction:}~~~~~ & \mathbf{v}_k=\mathbf{z}_k-\mathbf{H}_k\hat{x}_{k|k-1}\\
              & K_{k}=P_{k|k-1}\mathbf{H}^T(\mathbf{H}P_{k|k-1}\mathbf{H}^T+R)^{-1}\\
              & \hat{\mathbf{x}}_{k|k}=\hat{\mathbf{x}}_{k| k-1}+\mathbf{K}_k\mathbf{v}_k\\
              & \mathbf{P}_{k|k}=(\mathbb{I}-\mathbf{K}_k)\mathbf{P}_{k|k-1}\label{kalman2}
              \end{align}
              By recursive predictions and corrections, one is able to dynamically track the non-stationary system. One advantage of using the Kalman filter is that it doesn't make an assumption on the distribution of noises, which allows it to be used on more general signals .

              In order to apply it on the stock prices, a simple assumption is made based on the high fluctuation of the stock price to model the stock market as a maneuvering dynamic system, that is \begin{align}
              x(t+1)=x(t)+T\dot{x}(t)+\dfrac{1}{2}a(t) T^2\\
              \dot{x}(t+1)=\dot{x}(t)+a(t) T\\
              y(t)=x(t)+v(t)
              \end{align}
              where \(x\) and \(\dot{x}\) are the stock price and its change rate, \(y\) is the measurement and \(v\) is the measurement noise. If we regard the acceleration \(a\) as a white noise sequence, we can model the stock market as a linear dynamic system described in equation \eqref{ssm1}-\eqref{ssm2}, with
              \begin{align*}
                X(t)=\left[\begin{array}{c}x(t)\\\dot{x}(t)\end{array}\right]&&
                \Phi=\left[\begin{array}{cc}1&T\\0&1\end{array}\right],&&
                \Gamma=\left[\begin{array}{c}\frac{T^2}{2}\\T\end{array}\right],&&
                H=\left[\begin{array}{cc}1&0\end{array}\right]&&
                w(t)=a(t)
              \end{align*}

            </div>
          </section>
        </div>
        <div class="mdl-layout__tab-panel" id="forecast">
          <section class="section--center mdl-grid mdl-grid--no-spacing">
            <div class="mdl-cell mdl-cell--12-col">
              <h4>Forecast</h4>

              <ul class="toc">
                <h4>Contents</h4>
                <a href="#fmlr">Multiple Linear Regression</a>
                <a href="#fprony">Pronyâ€™s Algorithm</a>
                <a href="#fkalman">Kalman Filter</a>
              </ul>
              <div id="fmlr">
                <h5>Multiple Linear Regression</h5>
                <p>
                  Multiple Linear Regression is performed on a data set either to predict the response variable based on the predictor variable, or to study the relationship between the response variable and predictor variables. It is one of the most fundamental and commonly used regression models and is readily applied. In application, the linear regression trys to fit a linear model of the form
                  \begin{align}
                  Y= b_0 + b_1X_1 + b_2X_2+ \dots + b_kX_k+ e
                  \end{align}
                  on a given dataset, where \(Y\) is the dependent variable (response), \(X_1, X_2,\dots,X_k\) are the independent variables (predictors), \(e\) is the random error, and \(b_0 , b_1, b_2, \dots, b_k\) are known as the regression coefficients, which have to be estimated from the data .
                </p>
                <p>
                  In this project, we applied multiple linear regression on the price and date, which gave a general trend of the stock price and thus were able to extrapolate the price trend.
                </p>

              </div>
              <div id="fprony">
                <h5>Pronyâ€™s Algorithm</h5>
                <p>
                  Pronyâ€™s Algorithm was developed by Gaspard Riche de Prony in 1795, and similar to that of Fourier Transform, Pronyâ€™s Algorithm extracts the important components of a signal using a series of complex exponentials instead of trigonometric functions. Unlike Fourier transform, Pronyâ€™s algorithm is much better suited for the analysis of our model as majority of our stock market trends are not only non-periodic, but also correspond to that of exponential functions.
                  \begin{align}
                  j_{km}(t;s_n,R_n)=2\sum_n \Re\left(_nR_{km}e^{s_nt}\right)\label{prony}
                  \end{align}
                </p>
                <p>
                  Equation \eqref{prony} shows how Prony's method can be used to show the impulse response is comprised of a series of complex exponentials. However, for the scope of this project, we use this property of the Pronyâ€™s algorithm to find out the digital filter coefficients in order to predict the future trend using the previous stock market data.
                  \begin{align}
                  H(z)=\dfrac{\sum_{k=0}^q b[k]z^{-k}}{1+\sum_{l=0}^p a[l]z^{-l}},
                  \end{align}
                  where \(a\) is coefficient of the zeros and \(b\) is coefficient of the poles.
                </p>
                <p style="text-align: center"><img src="images/tf.jpg" width="300px"/></p>
                <p>
                  Specific time series of data (either closing or opening price) are used to determine the coefficients from numerator and denominator of the filter using MATLAB. Based on the determined transfer function of the filter, an impulse response can be used extrapolate the future trends of the desired variable.              </div>
                </p>
              <div id="fkalman">
                <h5>Kalman Filter</h5>
                <p>
                  As is introduced in <a href="#preprop">pre-processing</a> section, the Kalman filter is able to make one step ahead prediction, which is also very important especially for those short-term investors, though it does not work well on predicting the long term trend. To predict the next day's price, we simply implement the Kalman filter on the previous price and do the prediction step given in equation \eqref{kalman1} once more.
                </p>
              </div>
          </section>
        </div>
        <div class="mdl-layout__tab-panel" id="demo">
          <section class="section--center mdl-grid mdl-grid--no-spacing">
          <div style="width:100%;">
            <!-- Simple Textfield -->
            <div>
              <div class="mdl-textfield mdl-js-textfield">
                <input v-model="symbol" class="mdl-textfield__input" type="text" id="symbol">
                <label class="mdl-textfield__label" for="symbol">Stock Symbol (eg. MSFT)...</label>
              </div>
            </div>
            <!-- Raised button -->
            <button v-on:click="test()" class="mdl-button mdl-js-button mdl-button--raised">
              Button
            </button>
            <!-- Slider with Starting Value -->
            <p> <span>\(n\)</span>={{sma_n}} </p>
            <p style="width:300px">
              <input class="mdl-slider mdl-js-slider" type="range" v-model="sma_n"
                     min="1" max="100" value="3" tabindex="0">
            </p>
            <p><span>\(\alpha\)</span>={{ewma_a}}</p>
            <p style="width:300px">
              <input class="mdl-slider mdl-js-slider" type="range" v-model="ewma_a"
                     min="1" max="100" value="33" tabindex="0">
            </p>
            <div id="price" style="width:100%;"></div>
          </div>



          </section>
        </div>
        <footer class="mdl-mega-footer">
          <div class="mdl-mega-footer--middle-section">
            EECS 351 Digital Signal Processing and Analysis
          </div>
        </footer>
      </main>
    </div>

    <script src="scripts/material.min.js"></script>
    <!-- build:js scripts/main.min.js -->
    <script src="scripts/main.js"></script>
    <!-- endbuild -->

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } }
      });
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML' async></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/4.1.2/math.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="scripts/demo.js"></script>

    <!-- Built with love using Web Starter Kit -->
  </body>
</html>
